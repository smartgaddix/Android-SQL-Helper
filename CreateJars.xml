<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="copyjars" name="AndroidSQLHelper">
	
	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
		<classpath>
			<pathelement location="ant-contrib-0.6.jar"/>
  		</classpath>
	</taskdef>
	
	<property name="bin" value="bin" />
	<property name="lib" value="lib" />
	<property name="src" value="src" />
	<property name="codemodel" value="codemodel-2.4-SNAPSHOT" />

	<property name="completejar" value="bin/androidsqlhelper.jar" />
	<property name="annotationjar" value="bin/androidsqlhelperannotations.jar" />
	
	<property name="targetlist" value="tests/AndroidSQLHelperTest/lib, tests/SampleProject/lib"/>

	<target name="package">
		<jar destfile="${completejar}">
			<zipfileset dir="${bin}">
				<include name="META-INF/**" />
				<include name="**/*.class" />
			</zipfileset>
			<zipfileset dir="${lib}/${codemodel}">
				<include name="**/*.class" />
			</zipfileset>
		</jar>
		
		<jar destfile="${annotationjar}">
			<zipfileset dir="${bin}">
				<include name="**/annotation/*.class" />
			</zipfileset>			
		</jar>
	</target>
	
	<target name="copyjar" >
		<echo>${targetdir}</echo>

		<copy file="${completejar}" todir="${targetdir}"/>
		<copy file="${annotationjar}" todir="${targetdir}"/>
	</target>

	<target name="copyjars" depends="package">
		<echo>${targetlist}</echo>
		<foreach list="${targetlist}" target="copyjar" param="targetdir" delimiter="," trim="true" />
	</target>
	
</project>